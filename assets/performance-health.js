$(function () {
  // create custom link names for page scroller object
  var navLabel = new Array('', '', '', '', '');
  // initiate page scroller plugin
  $('.perf-health-body').pageScroller({
    navigation: navLabel,
    navigationClass: 'standardNav left dark',
    animationSpeed: 1100,
    animationType: 'easeOutExpo',
    scrollOffset: -82
  });

  setChartsTheme();

  var data = {
    "healthMovingAverage": [{"x":1358494201557,"y":95},{"x":1358497801490,"y":95},{"x":1358497801490,"y":95},{"x":1358501401400,"y":93.75},{"x":1358501401400,"y":93.75},{"x":1358505001227,"y":92.5},{"x":1358505001227,"y":92.5},{"x":1358508601363,"y":91.25},{"x":1358508601363,"y":91.25},{"x":1358512201443,"y":90},{"x":1358512201443,"y":90},{"x":1358515801353,"y":90},{"x":1358515801353,"y":90},{"x":1358519401193,"y":90},{"x":1358519401193,"y":90},{"x":1358523001273,"y":91.25},{"x":1358523001273,"y":91.25},{"x":1358526601410,"y":92.5},{"x":1358526601410,"y":92.5},{"x":1358530201667,"y":93.75},{"x":1358530201667,"y":93.75},{"x":1358533801210,"y":95},{"x":1358533801210,"y":95},{"x":1358537401280,"y":96.25},{"x":1358537401280,"y":96.25},{"x":1358541001180,"y":97.5},{"x":1358541001180,"y":97.5},{"x":1358544601213,"y":97.5},{"x":1358544601213,"y":97.5},{"x":1358548201297,"y":97.5},{"x":1358548201297,"y":97.5},{"x":1358551801717,"y":96.25},{"x":1358551801717,"y":96.25},{"x":1358555401207,"y":95},{"x":1358555401207,"y":95},{"x":1358559001273,"y":95},{"x":1358559001273,"y":95},{"x":1358562601523,"y":95},{"x":1358562601523,"y":95},{"x":1358566201510,"y":95},{"x":1358566201510,"y":95},{"x":1358569801960,"y":95},{"x":1358569801960,"y":95},{"x":1358573402070,"y":95},{"x":1358573402070,"y":95},{"x":1358577002130,"y":95},{"x":1358577002130,"y":95},{"x":1358580601320,"y":95},{"x":1358580601320,"y":95},{"x":1358584201380,"y":95},{"x":1358584201380,"y":95},{"x":1358587801473,"y":93.75},{"x":1358587801473,"y":93.75},{"x":1358591401203,"y":92.5},{"x":1358591401203,"y":92.5},{"x":1358595001523,"y":91.25},{"x":1358595001523,"y":91.25},{"x":1358598601343,"y":90},{"x":1358598601343,"y":90},{"x":1358602201317,"y":90},{"x":1358602201317,"y":90},{"x":1358605801383,"y":90},{"x":1358605801383,"y":90},{"x":1358609401223,"y":90},{"x":1358609401223,"y":90},{"x":1358613001417,"y":90},{"x":1358613001417,"y":90},{"x":1358616601280,"y":90},{"x":1358616601280,"y":90},{"x":1358620201363,"y":90},{"x":1358620201363,"y":90},{"x":1358623801190,"y":90},{"x":1358623801190,"y":90},{"x":1358627401310,"y":90},{"x":1358627401310,"y":90},{"x":1358631001383,"y":90},{"x":1358631001383,"y":90},{"x":1358634601390,"y":90},{"x":1358634601390,"y":90},{"x":1358638201287,"y":90},{"x":1358638201287,"y":90},{"x":1358641801237,"y":90},{"x":1358641801237,"y":90},{"x":1358645401210,"y":90},{"x":1358645401210,"y":90},{"x":1358649001393,"y":90},{"x":1358649001393,"y":90},{"x":1358652601403,"y":91.25},{"x":1358652601403,"y":91.25},{"x":1358656202560,"y":92.5},{"x":1358656202560,"y":92.5},{"x":1358659801847,"y":92.5},{"x":1358659801847,"y":92.5},{"x":1358663401983,"y":92.5},{"x":1358663401983,"y":92.5},{"x":1358667001657,"y":92.5},{"x":1358667001657,"y":92.5},{"x":1358670601380,"y":93.75},{"x":1358670601380,"y":93.75},{"x":1358674201540,"y":95},{"x":1358674201540,"y":95},{"x":1358677801370,"y":95},{"x":1358677801370,"y":95},{"x":1358681401327,"y":93.75},{"x":1358681401327,"y":93.75},{"x":1358685001377,"y":93.75},{"x":1358685001377,"y":93.75},{"x":1358688601200,"y":95},{"x":1358688601200,"y":95},{"x":1358692201983,"y":96.25},{"x":1358692201983,"y":96.25},{"x":1358695801743,"y":96.25},{"x":1358695801743,"y":96.25},{"x":1358699401253,"y":95},{"x":1358699401253,"y":95},{"x":1358703001387,"y":93.75},{"x":1358703001387,"y":93.75},{"x":1358706601633,"y":95},{"x":1358706601633,"y":95},{"x":1358710201480,"y":96.25},{"x":1358710201480,"y":96.25},{"x":1358713801423,"y":95},{"x":1358713801423,"y":95},{"x":1358717401333,"y":93.75},{"x":1358717401333,"y":93.75},{"x":1358721001197,"y":92.5},{"x":1358721001197,"y":92.5},{"x":1358724601370,"y":92.5},{"x":1358724601370,"y":92.5},{"x":1358728201213,"y":92.5},{"x":1358728201213,"y":92.5},{"x":1358731801207,"y":92.5},{"x":1358731801207,"y":92.5},{"x":1358735401197,"y":91.25},{"x":1358735401197,"y":91.25},{"x":1358739001553,"y":90},{"x":1358739001553,"y":90},{"x":1358742601910,"y":90},{"x":1358742601910,"y":90},{"x":1358746201830,"y":90},{"x":1358746201830,"y":90},{"x":1358749802173,"y":90},{"x":1358749802173,"y":90},{"x":1358753401233,"y":90},{"x":1358753401233,"y":90},{"x":1358757001197,"y":90},{"x":1358757001197,"y":90},{"x":1358760601413,"y":90},{"x":1358760601413,"y":90},{"x":1358764201630,"y":90},{"x":1358764201630,"y":90},{"x":1358767801250,"y":90},{"x":1358767801250,"y":90},{"x":1358771401523,"y":90},{"x":1358771401523,"y":90},{"x":1358775001247,"y":90},{"x":1358775001247,"y":90},{"x":1358778601293,"y":90},{"x":1358778601293,"y":90},{"x":1358782201427,"y":90},{"x":1358782201427,"y":90},{"x":1358785801177,"y":90},{"x":1358785801177,"y":90},{"x":1358789401717,"y":91.25},{"x":1358789401717,"y":91.25},{"x":1358793001477,"y":92.5},{"x":1358793001477,"y":92.5},{"x":1358796601387,"y":93.75},{"x":1358796601387,"y":93.75},{"x":1358800201177,"y":95},{"x":1358800201177,"y":95},{"x":1358803801363,"y":96.25},{"x":1358803801363,"y":96.25},{"x":1358807401277,"y":96.25},{"x":1358807401277,"y":96.25},{"x":1358811001330,"y":97.5},{"x":1358811001330,"y":97.5},{"x":1358814601670,"y":98.75},{"x":1358814601670,"y":98.75},{"x":1358818201257,"y":98.75},{"x":1358818201257,"y":98.75},{"x":1358821801370,"y":97.5},{"x":1358821801370,"y":97.5},{"x":1358825401217,"y":97.5},{"x":1358825401217,"y":97.5},{"x":1358829002217,"y":97.5},{"x":1358829002217,"y":97.5},{"x":1358832602110,"y":96.25},{"x":1358832602110,"y":96.25},{"x":1358836202390,"y":96.25},{"x":1358836202390,"y":96.25},{"x":1358839801363,"y":95},{"x":1358839801363,"y":95},{"x":1358843401437,"y":93.75},{"x":1358843401437,"y":93.75},{"x":1358847001227,"y":92.5},{"x":1358847001227,"y":92.5},{"x":1358850601217,"y":92.5},{"x":1358850601217,"y":92.5},{"x":1358854201333,"y":91.25},{"x":1358854201333,"y":91.25},{"x":1358857801483,"y":90},{"x":1358857801483,"y":90},{"x":1358861401323,"y":90},{"x":1358861401323,"y":90},{"x":1358865001243,"y":90},{"x":1358865001243,"y":90},{"x":1358868601240,"y":90},{"x":1358868601240,"y":90},{"x":1358872201240,"y":90},{"x":1358872201240,"y":90},{"x":1358875801333,"y":90},{"x":1358875801333,"y":90},{"x":1358879401230,"y":90},{"x":1358879401230,"y":90},{"x":1358883001377,"y":90},{"x":1358883001377,"y":90},{"x":1358886601300,"y":91.25},{"x":1358886601300,"y":91.25},{"x":1358890201513,"y":92.5},{"x":1358890201513,"y":92.5},{"x":1358893801350,"y":93.75},{"x":1358893801350,"y":93.75},{"x":1358897401287,"y":95},{"x":1358897401287,"y":95},{"x":1358901001393,"y":96.25},{"x":1358901001393,"y":96.25},{"x":1358904601297,"y":96.25},{"x":1358904601297,"y":96.25},{"x":1358908201217,"y":96.25},{"x":1358908201217,"y":96.25},{"x":1358911801243,"y":97.5},{"x":1358911801243,"y":97.5},{"x":1358915402020,"y":97.5},{"x":1358915402020,"y":97.5},{"x":1358919001933,"y":96.25},{"x":1358919001933,"y":96.25},{"x":1358922602810,"y":95},{"x":1358922602810,"y":95},{"x":1358926201350,"y":93.75},{"x":1358926201350,"y":93.75},{"x":1358929801310,"y":92.5},{"x":1358929801310,"y":92.5},{"x":1358933401317,"y":92.5},{"x":1358933401317,"y":92.5},{"x":1358937001173,"y":93.75},{"x":1358937001173,"y":93.75},{"x":1358940601190,"y":93.75},{"x":1358940601190,"y":93.75},{"x":1358944201233,"y":93.75},{"x":1358944201233,"y":93.75},{"x":1358947801277,"y":95},{"x":1358947801277,"y":95},{"x":1358951401380,"y":96.25},{"x":1358951401380,"y":96.25},{"x":1358955001397,"y":96.25},{"x":1358955001397,"y":96.25},{"x":1358958601253,"y":96.25},{"x":1358958601253,"y":96.25},{"x":1358962201403,"y":97.5},{"x":1358962201403,"y":97.5},{"x":1358965801713,"y":96.25},{"x":1358965801713,"y":96.25},{"x":1358969401353,"y":95},{"x":1358969401353,"y":95},{"x":1358973001483,"y":93.75},{"x":1358973001483,"y":93.75},{"x":1358976601200,"y":92.5},{"x":1358976601200,"y":92.5},{"x":1358980201293,"y":91.25},{"x":1358980201293,"y":91.25},{"x":1358983801277,"y":91.25},{"x":1358983801277,"y":91.25},{"x":1358987401420,"y":91.25},{"x":1358987401420,"y":91.25},{"x":1358991001407,"y":90},{"x":1358991001407,"y":90},{"x":1358994601510,"y":90},{"x":1358994601510,"y":90},{"x":1358998201277,"y":90},{"x":1358998201277,"y":90},{"x":1359001802100,"y":90},{"x":1359001802100,"y":90},{"x":1359005401923,"y":90},{"x":1359005401923,"y":90},{"x":1359009002227,"y":90},{"x":1359009002227,"y":90},{"x":1359012601293,"y":90},{"x":1359012601293,"y":90},{"x":1359016201490,"y":90},{"x":1359016201490,"y":90},{"x":1359019801680,"y":90},{"x":1359019801680,"y":90},{"x":1359023401293,"y":90},{"x":1359023401293,"y":90},{"x":1359027001370,"y":90},{"x":1359027001370,"y":90},{"x":1359030601473,"y":90},{"x":1359030601473,"y":90},{"x":1359034201287,"y":90},{"x":1359034201287,"y":90},{"x":1359037801303,"y":90},{"x":1359037801303,"y":90},{"x":1359041401320,"y":90},{"x":1359041401320,"y":90},{"x":1359045001470,"y":90},{"x":1359045001470,"y":90},{"x":1359048601377,"y":90},{"x":1359048601377,"y":90},{"x":1359052201233,"y":90},{"x":1359052201233,"y":90},{"x":1359055801360,"y":90},{"x":1359055801360,"y":90},{"x":1359059401343,"y":91.25},{"x":1359059401343,"y":91.25},{"x":1359063002107,"y":91.25},{"x":1359063002107,"y":91.25},{"x":1359066601483,"y":91.25},{"x":1359066601483,"y":91.25},{"x":1359070201223,"y":92.5},{"x":1359070201223,"y":92.5},{"x":1359073801533,"y":93.75},{"x":1359073801533,"y":93.75},{"x":1359077401647,"y":95},{"x":1359077401647,"y":95},{"x":1359081001273,"y":96.25},{"x":1359081001273,"y":96.25},{"x":1359084601280,"y":97.5},{"x":1359084601280,"y":97.5},{"x":1359088202380,"y":96.25},{"x":1359088202380,"y":96.25},{"x":1359091802120,"y":96.25},{"x":1359091802120,"y":96.25},{"x":1359099001737,"y":96.25},{"x":1359099001737,"y":96.25},{"x":1359102601397,"y":96.25},{"x":1359102601397,"y":96.25},{"x":1359106201310,"y":96.25},{"x":1359106201310,"y":96.25},{"x":1359109801527,"y":95},{"x":1359109801527,"y":95},{"x":1359113401303,"y":93.75},{"x":1359113401303,"y":93.75},{"x":1359117001333,"y":93.75},{"x":1359117001333,"y":93.75},{"x":1359120601270,"y":95},{"x":1359120601270,"y":95},{"x":1359124201670,"y":95},{"x":1359124201670,"y":95},{"x":1359163801217,"y":95},{"x":1359163801217,"y":95},{"x":1359167401197,"y":93.75},{"x":1359167401197,"y":93.75},{"x":1359171001230,"y":92.5},{"x":1359171001230,"y":92.5},{"x":1359174602273,"y":92.5},{"x":1359174602273,"y":92.5},{"x":1359178201827,"y":92.5},{"x":1359178201827,"y":92.5},{"x":1359181802237,"y":91.25},{"x":1359181802237,"y":91.25},{"x":1359185401440,"y":90},{"x":1359185401440,"y":90},{"x":1359189001313,"y":91.25},{"x":1359189001313,"y":91.25},{"x":1359192601500,"y":92.5},{"x":1359192601500,"y":92.5},{"x":1359196201207,"y":93.75},{"x":1359196201207,"y":93.75},{"x":1359199801223,"y":93.75},{"x":1359199801223,"y":93.75},{"x":1359203401410,"y":93.75},{"x":1359203401410,"y":93.75},{"x":1359207001223,"y":93.75},{"x":1359207001223,"y":93.75},{"x":1359210601430,"y":93.75},{"x":1359210601430,"y":93.75},{"x":1359214201350,"y":93.75},{"x":1359214201350,"y":93.75},{"x":1359217801823,"y":92.5},{"x":1359217801823,"y":92.5},{"x":1359221401273,"y":91.25},{"x":1359221401273,"y":91.25},{"x":1359225001320,"y":90},{"x":1359225001320,"y":90},{"x":1359228601290,"y":90},{"x":1359228601290,"y":90},{"x":1359232201303,"y":90},{"x":1359232201303,"y":90},{"x":1359235801277,"y":90},{"x":1359235801277,"y":90},{"x":1359239401493,"y":90},{"x":1359239401493,"y":90},{"x":1359243001213,"y":90},{"x":1359243001213,"y":90},{"x":1359246601213,"y":90},{"x":1359246601213,"y":90},{"x":1359250201323,"y":90},{"x":1359250201323,"y":90},{"x":1359253801300,"y":91.25},{"x":1359253801300,"y":91.25},{"x":1359257401270,"y":91.25},{"x":1359257401270,"y":91.25},{"x":1359261002153,"y":91.25},{"x":1359261002153,"y":91.25},{"x":1359264601913,"y":91.25},{"x":1359264601913,"y":91.25},{"x":1359268202213,"y":91.25},{"x":1359268202213,"y":91.25},{"x":1359271801303,"y":92.5},{"x":1359271801303,"y":92.5},{"x":1359275401347,"y":92.5},{"x":1359275401347,"y":92.5},{"x":1359279001373,"y":92.5},{"x":1359279001373,"y":92.5},{"x":1359282601283,"y":91.25},{"x":1359282601283,"y":91.25},{"x":1359286201773,"y":91.25},{"x":1359286201773,"y":91.25},{"x":1359289802340,"y":91.25},{"x":1359289802340,"y":91.25},{"x":1359293401227,"y":91.25},{"x":1359293401227,"y":91.25},{"x":1359297001400,"y":91.25},{"x":1359297001400,"y":91.25},{"x":1359300601370,"y":90},{"x":1359300601370,"y":90},{"x":1359304201203,"y":90},{"x":1359304201203,"y":90},{"x":1359307801250,"y":90},{"x":1359307801250,"y":90},{"x":1359311401380,"y":90},{"x":1359311401380,"y":90},{"x":1359315001207,"y":90},{"x":1359315001207,"y":90},{"x":1359318601477,"y":90},{"x":1359318601477,"y":90},{"x":1359322201207,"y":90},{"x":1359322201207,"y":90},{"x":1359325801323,"y":91.25},{"x":1359325801323,"y":91.25},{"x":1359329401417,"y":91.25},{"x":1359329401417,"y":91.25},{"x":1359333001273,"y":91.25},{"x":1359333001273,"y":91.25},{"x":1359336601410,"y":91.25},{"x":1359336601410,"y":91.25},{"x":1359340201357,"y":91.25},{"x":1359340201357,"y":91.25},{"x":1359343801937,"y":91.25},{"x":1359343801937,"y":91.25},{"x":1359347402440,"y":91.25},{"x":1359347402440,"y":91.25},{"x":1359351001900,"y":91.25},{"x":1359351001900,"y":91.25},{"x":1359354602197,"y":90},{"x":1359354602197,"y":90},{"x":1359358201493,"y":90},{"x":1359358201493,"y":90},{"x":1359361801377,"y":90},{"x":1359361801377,"y":90},{"x":1359365401317,"y":90},{"x":1359365401317,"y":90},{"x":1359369001190,"y":90},{"x":1359369001190,"y":90},{"x":1359372601443,"y":90},{"x":1359372601443,"y":90},{"x":1359376201317,"y":90},{"x":1359376201317,"y":90},{"x":1359379801357,"y":90},{"x":1359379801357,"y":90},{"x":1359383401387,"y":90},{"x":1359383401387,"y":90},{"x":1359387001283,"y":90},{"x":1359387001283,"y":90},{"x":1359390601370,"y":90},{"x":1359390601370,"y":90},{"x":1359394201363,"y":90},{"x":1359394201363,"y":90},{"x":1359397801230,"y":91.25},{"x":1359397801230,"y":91.25},{"x":1359401401310,"y":92.5},{"x":1359401401310,"y":92.5},{"x":1359405001317,"y":93.75},{"x":1359405001317,"y":93.75},{"x":1359408601423,"y":93.75},{"x":1359408601423,"y":93.75},{"x":1359412201240,"y":95},{"x":1359412201240,"y":95},{"x":1359415801357,"y":96.25},{"x":1359415801357,"y":96.25},{"x":1359419401270,"y":97.5},{"x":1359419401270,"y":97.5},{"x":1359423001427,"y":97.5},{"x":1359423001427,"y":97.5},{"x":1359426601480,"y":97.5},{"x":1359426601480,"y":97.5},{"x":1359430201370,"y":97.5},{"x":1359430201370,"y":97.5},{"x":1359433801913,"y":97.5},{"x":1359433801913,"y":97.5},{"x":1359437401873,"y":97.5},{"x":1359437401873,"y":97.5},{"x":1359441001987,"y":97.5},{"x":1359441001987,"y":97.5},{"x":1359444601593,"y":97.5},{"x":1359444601593,"y":97.5},{"x":1359448201330,"y":96.25},{"x":1359448201330,"y":96.25},{"x":1359451801530,"y":97.5},{"x":1359451801530,"y":97.5},{"x":1359455401300,"y":97.5},{"x":1359455401300,"y":97.5},{"x":1359459001290,"y":97.5},{"x":1359459001290,"y":97.5},{"x":1359462601397,"y":97.5},{"x":1359462601397,"y":97.5},{"x":1359466201340,"y":97.5},{"x":1359466201340,"y":97.5},{"x":1359469801417,"y":96.25},{"x":1359469801417,"y":96.25},{"x":1359473401380,"y":96.25},{"x":1359473401380,"y":96.25},{"x":1359477001383,"y":97.5},{"x":1359477001383,"y":97.5},{"x":1359480601207,"y":96.25},{"x":1359480601207,"y":96.25},{"x":1359484201203,"y":95},{"x":1359484201203,"y":95},{"x":1359487801230,"y":93.75},{"x":1359487801230,"y":93.75},{"x":1359491402417,"y":92.5},{"x":1359491402417,"y":92.5},{"x":1359495001257,"y":92.5},{"x":1359495001257,"y":92.5},{"x":1359498601527,"y":92.5},{"x":1359498601527,"y":92.5},{"x":1359502201387,"y":91.25},{"x":1359502201387,"y":91.25},{"x":1359505801327,"y":90},{"x":1359505801327,"y":90},{"x":1359509401387,"y":90},{"x":1359509401387,"y":90},{"x":1359513001513,"y":90},{"x":1359513001513,"y":90},{"x":1359516601397,"y":90},{"x":1359516601397,"y":90},{"x":1359520201993,"y":90},{"x":1359520201993,"y":90},{"x":1359523801793,"y":90},{"x":1359523801793,"y":90},{"x":1359527402177,"y":90},{"x":1359527402177,"y":90},{"x":1359531001370,"y":91.25},{"x":1359531001370,"y":91.25},{"x":1359534601270,"y":91.25},{"x":1359534601270,"y":91.25},{"x":1359538201260,"y":91.25},{"x":1359538201260,"y":91.25},{"x":1359541801417,"y":91.25},{"x":1359541801417,"y":91.25},{"x":1359545401307,"y":91.25},{"x":1359545401307,"y":91.25},{"x":1359549001210,"y":92.5},{"x":1359549001210,"y":92.5},{"x":1359552601337,"y":92.5},{"x":1359552601337,"y":92.5},{"x":1359556201563,"y":92.5},{"x":1359556201563,"y":92.5},{"x":1359559801680,"y":91.25},{"x":1359559801680,"y":91.25},{"x":1359563401423,"y":91.25},{"x":1359563401423,"y":91.25},{"x":1359567002280,"y":91.25},{"x":1359567002280,"y":91.25},{"x":1359570601470,"y":91.25},{"x":1359570601470,"y":91.25},{"x":1359574201350,"y":91.25},{"x":1359574201350,"y":91.25},{"x":1359577801237,"y":90},{"x":1359577801237,"y":90},{"x":1359581401270,"y":90},{"x":1359581401270,"y":90},{"x":1359585001343,"y":90},{"x":1359585001343,"y":90},{"x":1359588601250,"y":90},{"x":1359588601250,"y":90},{"x":1359592201250,"y":90},{"x":1359592201250,"y":90},{"x":1359595801387,"y":90},{"x":1359595801387,"y":90},{"x":1359599401280,"y":90},{"x":1359599401280,"y":90},{"x":1359603001267,"y":90},{"x":1359603001267,"y":90},{"x":1359606601993,"y":90},{"x":1359606601993,"y":90},{"x":1359610201557,"y":90},{"x":1359610201557,"y":90},{"x":1359613802023,"y":90},{"x":1359613802023,"y":90},{"x":1359617402110,"y":90},{"x":1359617402110,"y":90},{"x":1359621001207,"y":90},{"x":1359621001207,"y":90},{"x":1359624601310,"y":90},{"x":1359624601310,"y":90},{"x":1359628201360,"y":91.25},{"x":1359628201360,"y":91.25},{"x":1359631801527,"y":92.5},{"x":1359631801527,"y":92.5},{"x":1359635401383,"y":93.75},{"x":1359635401383,"y":93.75},{"x":1359639001767,"y":95},{"x":1359639001767,"y":95},{"x":1359642601527,"y":96.25},{"x":1359642601527,"y":96.25},{"x":1359646201417,"y":97.5},{"x":1359646201417,"y":97.5},{"x":1359649801400,"y":97.5},{"x":1359649801400,"y":97.5},{"x":1359653401413,"y":98.75},{"x":1359653401413,"y":98.75},{"x":1359657001240,"y":98.75},{"x":1359657001240,"y":98.75},{"x":1359660601240,"y":98.75},{"x":1359660601240,"y":98.75},{"x":1359664201240,"y":98.75},{"x":1359664201240,"y":98.75},{"x":1359667801190,"y":98.75},{"x":1359667801190,"y":98.75},{"x":1359671401480,"y":98.75},{"x":1359671401480,"y":98.75},{"x":1359675001200,"y":97.5},{"x":1359675001200,"y":97.5},{"x":1359678601380,"y":97.5},{"x":1359678601380,"y":97.5},{"x":1359682201773,"y":97.5},{"x":1359682201773,"y":97.5},{"x":1359685801517,"y":97.5},{"x":1359685801517,"y":97.5},{"x":1359689401177,"y":97.5},{"x":1359689401177,"y":97.5},{"x":1359693002387,"y":97.5},{"x":1359693002387,"y":97.5},{"x":1359696601823,"y":96.25},{"x":1359696601823,"y":96.25},{"x":1359700202290,"y":96.25},{"x":1359700202290,"y":96.25},{"x":1359703801457,"y":96.25},{"x":1359703801457,"y":96.25},{"x":1359707401423,"y":97.5},{"x":1359707401423,"y":97.5},{"x":1359711002373,"y":97.5},{"x":1359711002373,"y":97.5},{"x":1359714601310,"y":97.5},{"x":1359714601310,"y":97.5},{"x":1359718201457,"y":97.5},{"x":1359718201457,"y":97.5},{"x":1359721801173,"y":97.5},{"x":1359721801173,"y":97.5},{"x":1359725401407,"y":98.75},{"x":1359725401407,"y":98.75},{"x":1359729001410,"y":98.75},{"x":1359729001410,"y":98.75},{"x":1359732601360,"y":98.75},{"x":1359732601360,"y":98.75},{"x":1359736201340,"y":97.5},{"x":1359736201340,"y":97.5},{"x":1359739801253,"y":96.25},{"x":1359739801253,"y":96.25},{"x":1359743401433,"y":95},{"x":1359743401433,"y":95},{"x":1359747001397,"y":93.75},{"x":1359747001397,"y":93.75},{"x":1359750601437,"y":92.5},{"x":1359750601437,"y":92.5},{"x":1359754201193,"y":91.25},{"x":1359754201193,"y":91.25},{"x":1359757801530,"y":90},{"x":1359757801530,"y":90},{"x":1359761401210,"y":90},{"x":1359761401210,"y":90}],
    "recentHealth": [{"x":1359509401387,"y":90,"isHealthy":true},{"x":1359513001513,"y":90,"isHealthy":true},{"x":1359516601397,"y":90,"isHealthy":true},{"x":1359520201993,"y":90,"isHealthy":true},{"x":1359523801793,"y":90,"isHealthy":true},{"x":1359527402177,"y":90,"isHealthy":true},{"x":1359531001370,"y":100,"isHealthy":true},{"x":1359534601270,"y":90,"isHealthy":true},{"x":1359538201260,"y":90,"isHealthy":true},{"x":1359541801417,"y":90,"isHealthy":true},{"x":1359545401307,"y":90,"isHealthy":true},{"x":1359549001210,"y":100,"isHealthy":true},{"x":1359552601337,"y":90,"isHealthy":true},{"x":1359556201563,"y":90,"isHealthy":true},{"x":1359559801680,"y":90,"isHealthy":true},{"x":1359563401423,"y":90,"isHealthy":true},{"x":1359567002280,"y":90,"isHealthy":true},{"x":1359570601470,"y":90,"isHealthy":true},{"x":1359574201350,"y":90,"isHealthy":true},{"x":1359577801237,"y":90,"isHealthy":true},{"x":1359581401270,"y":90,"isHealthy":true},{"x":1359585001343,"y":90,"isHealthy":true},{"x":1359588601250,"y":90,"isHealthy":true},{"x":1359592201250,"y":90,"isHealthy":true},{"x":1359595801387,"y":90,"isHealthy":true},{"x":1359599401280,"y":90,"isHealthy":true},{"x":1359603001267,"y":90,"isHealthy":true},{"x":1359606601993,"y":90,"isHealthy":true},{"x":1359610201557,"y":90,"isHealthy":true},{"x":1359613802023,"y":90,"isHealthy":true},{"x":1359617402110,"y":90,"isHealthy":true},{"x":1359621001207,"y":90,"isHealthy":true},{"x":1359624601310,"y":90,"isHealthy":true},{"x":1359628201360,"y":100,"isHealthy":true},{"x":1359631801527,"y":100,"isHealthy":true},{"x":1359635401383,"y":100,"isHealthy":true},{"x":1359639001767,"y":100,"isHealthy":true},{"x":1359642601527,"y":100,"isHealthy":true},{"x":1359646201417,"y":100,"isHealthy":true},{"x":1359649801400,"y":90,"isHealthy":true},{"x":1359653401413,"y":100,"isHealthy":true},{"x":1359657001240,"y":100,"isHealthy":true},{"x":1359660601240,"y":100,"isHealthy":true},{"x":1359664201240,"y":100,"isHealthy":true},{"x":1359667801190,"y":100,"isHealthy":true},{"x":1359671401480,"y":100,"isHealthy":true},{"x":1359675001200,"y":90,"isHealthy":true},{"x":1359678601380,"y":90,"isHealthy":true},{"x":1359682201773,"y":100,"isHealthy":true},{"x":1359685801517,"y":70,"isHealthy":false},{"x":1359689401177,"y":100,"isHealthy":true},{"x":1359693002387,"y":100,"isHealthy":true},{"x":1359696601823,"y":90,"isHealthy":true},{"x":1359700202290,"y":100,"isHealthy":true},{"x":1359703801457,"y":90,"isHealthy":true},{"x":1359707401423,"y":100,"isHealthy":true},{"x":1359711002373,"y":100,"isHealthy":true},{"x":1359714601310,"y":100,"isHealthy":true},{"x":1359718201457,"y":100,"isHealthy":true},{"x":1359721801173,"y":100,"isHealthy":true},{"x":1359725401407,"y":100,"isHealthy":true},{"x":1359729001410,"y":100,"isHealthy":true},{"x":1359732601360,"y":90,"isHealthy":true},{"x":1359736201340,"y":90,"isHealthy":true},{"x":1359739801253,"y":90,"isHealthy":true},{"x":1359743401433,"y":90,"isHealthy":true},{"x":1359747001397,"y":90,"isHealthy":true},{"x":1359750601437,"y":90,"isHealthy":true},{"x":1359754201193,"y":75,"isHealthy":false},{"x":1359757801530,"y":90,"isHealthy":true},{"x":1359761401210,"y":90,"isHealthy":true}],
    "worstHealthPoint": { "x": 1359685801517, "y": 70 },
    "worldHealth": [{ "x": 0, "y": 0, "isHealthy": false }, { "x": 1, "y": 0, "isHealthy": false }, { "x": 2, "y": 0, "isHealthy": false }, { "x": 3, "y": 0, "isHealthy": false }, { "x": 4, "y": 0, "isHealthy": false }, { "x": 5, "y": 0, "isHealthy": false }, { "x": 6, "y": 0, "isHealthy": false }, { "x": 7, "y": 25, "isHealthy": false }, { "x": 8, "y": 25, "isHealthy": true }, { "x": 9, "y": 50, "isHealthy": true }],
    "ioLatencyHistory": [[1433597431273,6.4],[1433601001437,3.7],[1433604601390,10.2],[1433608201457,6.9],[1433611801460,9.3],[1433615401517,9.8],[1433619001207,12.5],[1433622601427,10.7],[1433626201450,10],[1433629801393,12.6],[1433633401500,10.1],[1433637001423,7.2],[1433640601387,13.2],[1433644201547,9.3],[1433647801393,11.7],[1433651401397,12.9],[1433655023753,11.1],[1433658606600,7.5],[1433662201440,11.2],[1433665801877,18],[1433669401310,21.2],[1433673001303,17.1],[1433676629813,4.6],[1433680201493,5.7],[1433683801373,8.7],[1433687401463,8],[1433691001380,8.5],[1433694601550,8.4],[1433698201283,8.5],[1433701801470,14.5],[1433705401420,13.4],[1433709001440,10.1],[1433712601550,10.3],[1433716201423,13.7],[1433719801440,8.5],[1433723401393,22.7],[1433727001463,10.5],[1433730601503,16.4],[1433734201250,9.9],[1433737801460,13.7],[1433741423303,9.6],[1433745004253,7.5],[1433748601253,12.7],[1433752201333,15.3],[1433755801380,13.3],[1433759401727,15],[1433763033270,6.1],[1433766601640,4.5],[1433770201243,9.1],[1433773801350,5.5],[1433777401460,6.2],[1433781001197,10.4],[1433784601460,8.5],[1433788201357,8.3],[1433791801520,5.3],[1433795401307,7.1],[1433799001370,5.5],[1433802601423,6.6],[1433806201560,4.8],[1433809801393,4],[1433813401423,5.9],[1433971801427,10.2],[1433975401413,4.6],[1433979001367,4.8],[1433982601293,8.8],[1433986235467,7.2],[1433989802920,5],[1433993402043,9.3],[1433997001383,9.9],[1434000620640,6.2],[1434004217557,6.6],[1434007801587,8.3],[1434011401343,8],[1434015001330,15.2],[1434018601333,5.4],[1434022201313,5.4],[1434029401303,6.1],[1434033001460,8],[1434036601610,5],[1434043812367,6.5],[1434047403720,7.7],[1434051003663,4.6],[1434054635907,4.9],[1434058203067,5.4],[1434061802193,8],[1434065401397,11.6],[1434069001370,5.6],[1434072601513,6.9],[1434076201533,6],[1434079801333,12.9],[1434083401480,10.3],[1434087013247,6.3],[1434090614123,6.8],[1434094205993,8.7],[1434097801210,9.1],[1434101401287,5],[1434105001333,6.9],[1434108601653,6.3],[1434133801327,5.9],[1434137401530,6.4],[1434141001537,5.4],[1434144601607,4.3],[1434148201283,4.8],[1434151801280,7.3],[1434155401400,6.7],[1434162601633,4.6],[1434166201297,6],[1434169801380,8.4],[1434173424013,6.7],[1434177006910,7.3],[1434180601370,3.9],[1434187831340,3.6],[1434191401580,4.4],[1434195001500,10.8],[1434198601330,8.4],[1434202201483,13],[1434205801343,8.9],[1434209401387,6.5],[1434213001420,16.4],[1434216601390,2.9],[1434220201513,4],[1434223801547,5.4],[1434227401330,3.7],[1434231001387,5.5],[1434234601383,5.2],[1434238201327,1.7],[1434241801303,16.6],[1434245401297,10],[1434249001510,5.3],[1434252601267,10.4],[1434263407113,7],[1434267001553,17.5],[1434270601360,1.7],[1434277801237,16.3],[1434281432273,4.7],[1434285002423,6.2],[1434288601460,8.4],[1434292201413,8.2],[1434295801443,7.8],[1434299401500,5],[1434303001517,5],[1434306601310,3.9],[1434310201290,7.3],[1434313801507,11.9],[1434317401367,6.5],[1434321001243,7.2],[1434324601387,7.2],[1434328201307,6.5],[1434331801297,7],[1434335401783,7.8],[1434339001227,5.9],[1434342601390,22.3],[1434346222620,3.3],[1434349806613,7.2],[1434353401310,10.5],[1434357001227,4.1],[1434360632250,5.8],[1434364201540,4.5],[1434367801400,9.1],[1434371401293,7.7],[1434375001367,6],[1434378601463,6.5],[1434382201460,8.1],[1434385801387,3.5],[1434389401610,10.9],[1434393001360,4],[1434396601307,4.4],[1434400201297,9.6],[1434403801307,8.3],[1434407401433,5.1],[1434411001270,9.3],[1434414601280,12.5],[1434418201390,4],[1434421801500,6.8],[1434425401417,12],[1434429001273,8],[1434432634883,3.5],[1434436204403,5.7],[1434439801533,9.7],[1434443401313,4.2],[1434447001410,5.3],[1434450601793,4.4],[1434454201297,6.5],[1434457801537,4.9],[1434461401510,7.6],[1434465001280,3.8],[1434468601370,5.9],[1434472201330,5.9],[1434475801303,10],[1434479401310,4.3],[1434483001307,7.1],[1434486601240,5.5],[1434490201243,4.2],[1434493801543,5.2],[1434497435757,7.3],[1434501001873,6.1],[1434504601670,5.8],[1434508201557,7.6],[1434511801437,3.4],[1434515401487,7],[1434519022383,7.6],[1434522607477,7],[1434526201417,17.9],[1434529801453,3.9],[1434533401457,5.6],[1434537001440,5],[1434540601307,10.4],[1434544201687,4.3],[1434547801413,5.2],[1434551401263,3.7],[1434555001590,6.5],[1434558601627,7.3],[1434562201290,6.1],[1434565842753,6],[1434569402207,5.7],[1434573001580,5.3],[1434576601367,5],[1434580201553,6],[1434583801480,2.9],[1434587402053,14.5],[1434591001460,5.8],[1434594601293,8.1],[1434598201440,6.1],[1434601801500,9.2],[1434605422787,7],[1434609007077,7.2],[1434612601410,11.5],[1434616201513,13],[1434619801287,7.8],[1434630601343,5.8],[1434634201353,6.7],[1434637801707,4],[1434641480117,10.4],[1434645002150,5.7],[1434648601450,7.7],[1434652201300,6.5],[1434655801230,7],[1434659401480,4.4],[1434663001277,9],[1434666601370,15],[1434670201377,6.7],[1434673801360,6.8],[1434677401247,3.6],[1434681001450,14.8],[1434688201380,15.5],[1434691822780,9],[1434695406667,7],[1434699001343,22],[1434702601303,5],[1434706201430,2.1],[1434709801330,8.8],[1434713401290,5.2],[1434717030877,6.7],[1434720601310,3.5],[1434724201390,8.2],[1434727801350,7.2],[1434731401297,14],[1434735001397,12.5],[1434738601373,8.3],[1434742201387,11.6],[1434745801457,13.3],[1434749401323,14.3],[1434753001390,12.4],[1434756601300,12.6],[1434760201293,10.9],[1434763801303,11],[1434767401277,14],[1434771001283,13.4],[1434774601507,13],[1434778222670,15],[1434781806870,7.5],[1434785428793,7.6],[1434789001413,5],[1434792601303,8.9],[1434796201323,8.6],[1434799801447,9.8],[1434803401310,9],[1434807001503,10.5],[1434810601267,8.9],[1434814201330,7],[1434817801257,11.4],[1434821401460,11],[1434825001210,15],[1434828601307,14],[1434832201397,7.3],[1434835801280,19.1],[1434839401470,11.5],[1434843001443,13.4],[1434846601270,9.1],[1434850201403,13.9],[1434853801257,15.8],[1434857401577,13.5],[1434861001243,19],[1434864631470,5.9],[1434868205240,5.8],[1434871801517,11.6],[1434875401290,6.5],[1434879001397,5.3],[1434882601443,12.3],[1434886201320,11],[1434889801480,6.2],[1434893401447,8],[1434897001380,4.5],[1434900601280,6.2],[1434904201363,15.3],[1434907801293,3.9],[1434911401273,5.7],[1434915001410,6.2],[1434918601280,6.4],[1434922201243,5],[1434925801267,6.6],[1434929401450,4.6],[1434933035753,7.5],[1434936601753,6.1],[1434940202353,5.7],[1434943801717,5.2],[1434947401510,7.2],[1434951022963,6.4],[1434954604203,7],[1434958201437,9.2],[1434961801833,4.8],[1434965401333,7.2],[1434969001413,7.3],[1434972601350,11.8],[1434976201407,10],[1434979801273,7],[1434983401253,5.5],[1434987001337,4.9],[1434990601337,4.6],[1434994201223,3.4],[1434997801257,4.3],[1435001401240,3.8],[1435005001393,4.8],[1435008601297,9.5],[1435012235330,8],[1435015802630,4.8],[1435019401503,13.1],[1435023002393,5.9],[1435026601327,13],[1435030201363,9.6],[1435033801387,6.2],[1435037423127,8.5],[1435041004903,7],[1435044601380,12.2],[1435048201297,5.7],[1435051801380,8.3],[1435055401280,7.5],[1435059001330,4.1],[1435062601270,7.5],[1435066201297,7.9],[1435069801357,5.7],[1435073401243,7.3],[1435077001233,3],[1435080601360,4.1],[1435084201213,6.2],[1435087801300,12.2],[1435091431187,12.8],[1435095002453,4.3],[1435098601513,6.5],[1435102201390,11.4],[1435105801780,8.6],[1435109401323,7.7],[1435113002153,10.5],[1435116601490,15.9],[1435120201443,11.1],[1435123819913,11],[1435127407077,7.2],[1435131001303,19.1],[1435134601277,14],[1435138201470,11.1],[1435141801217,9.1],[1435145403073,13.8],[1435149002713,16],[1435152602840,10.8],[1435156241457,4.3],[1435159801690,5.3],[1435163401213,5.8],[1435167000940,12.9],[1435170601000,6],[1435174200947,6.8],[1435177801533,8.8],[1435181400940,3.7],[1435185001157,5.8],[1435188601050,6.8],[1435192200977,7.7],[1435195800910,9],[1435199400847,9.4],[1435203000893,10],[1435206600860,5],[1435210222833,5.1],[1435213821253,7.6],[1435217403323,3.8],[1435224600873,19],[1435228200900,1.4],[1435231829577,8],[1435235401040,4.4],[1435239000933,11.5],[1435242600960,8.6],[1435246200900,9.9],[1435249800893,9.8],[1435253400870,10.1],[1435257000890,15.8],[1435260600890,9.8],[1435264200857,11],[1435267800847,12.5],[1435271400857,15.4],[1435275000867,11.2],[1435278600857,8.9],[1435282200850,13],[1435285800907,12],[1435289400850,15],[1435293000863,12.9],[1435296620097,12.5],[1435300206397,8.1],[1435303800867,13.9],[1435307455167,9.4],[1435311001713,6.5],[1435314600953,5.5],[1435318201297,6.6],[1435321801020,9.9],[1435325400917,5.9],[1435329000927,3.5],[1435332600950,5.2],[1435336200893,9.3],[1435339800893,4.1],[1435343400850,4.9],[1435347000900,3.1],[1435350600870,9.2],[1435354200880,4.8],[1435357800850,10.8],[1435361400850,11.4],[1435365000897,26],[1435372200863,3.4],[1435375800867,5.1],[1435379437640,6.5],[1435383026330,4.3],[1435386603990,6.5],[1435390200900,5.9],[1435393801543,8.5],[1435397400953,7.4],[1435401000910,10.5],[1435404600853,5.5],[1435408201490,5.5],[1435411800880,8],[1435415400910,9.2],[1435419000907,4.8],[1435422601317,4.4],[1435426200870,3.8],[1435429800853,3],[1435433400870,4.8],[1435437000900,6.7],[1435440600847,4.2],[1435444200863,6],[1435447914560,9.7],[1435451402670,4.7],[1435455001187,4.7],[1435458601290,11.8],[1435462201690,7],[1435465801030,15.8],[1435469425340,5.5],[1435473006897,7.5],[1435476601090,6.8],[1435480200943,9.4],[1435483801030,6.2],[1435487400887,10.2],[1435491000887,7.5],[1435494600853,6.3],[1435498200850,9.8],[1435501800847,3.7],[1435505400890,3.9],[1435509000860,8.8],[1435516231357,3.8],[1435519801063,4.8],[1435523400890,9.6],[1435527000887,8.9],[1435530600893,8.9],[1435534200890,9.9],[1435537800883,5.4],[1435541400903,8.6],[1435545000887,10.2]]
  };
  
  drawRecentHealthChart(data);
  drawIoLatencyHistoryChart(data.ioLatencyHistory);
  drawWorldComparisonChart(data.worldHealth);
  setWorstHealthTime(data.worstHealthPoint.x);

  params = { observationTimeJs: data.worstHealthPoint.x };
  var pointData = {
    worstWaitCategories: {
      categories: ["CPU", "I/O", "Lock", "Latch"],
      values: [
        { y: 20, isGood: true },
        { y: 30, isGood: true },
        { y: 19, isGood: false },
        { y: 49, isGood: false }
      ]
    },
    singleBlockReadLatency: 15,
    "problems": { "highSingleBlockReadTime": true, "categoriesThatCanRelinquishWaitTime": "", "moreAvailable": false }
  };
  drawWaitCategoriesChart(pointData.worstWaitCategories);
  drawIoLatencyChart(pointData.singleBlockReadLatency);
  showProblems(pointData.problems);
  $("#single-block-read-latency").text(pointData.singleBlockReadLatency);
  


  $(".perf-health-box-close").click(function () {
    $(this).parent().next(".perf-health-box-content").slideToggle("fast");
    $(this).prev(".collapsed-title").toggle();
    $(this).toggleClass("perf-health-box-open");
    return false;
  });

  $(".perf-healthSQL_tooltip1").qtip({
    content: {
      text: function () {
        return $(this).next("div").clone();
      },
      title: {
        text: "How is a performance health rating calculated?",
        button: true
      }
    },
    position: {
      my: 'left center',  // Position tooltip's top left...
      at: 'left center', // at the bottom center of invoker link
      adjust: { x: 260, y: 0 }
    },
    show: {
      event: 'click', // Show it on click...
      solo: true, // ...and hide all other tooltips
      effect: function () { $(this).fadeIn() }
    },
    hide: {
      event: 'unfocus',
      effect: function () { $(this).fadeOut() }
    },
    style: {
      classes: "qtip-jtools lucy",
      tip: {
        corner: "left center",
        mimic: "left center",
        offset: 0,
        width: 25,
        height: 20
      }
    }
  });

  $(".perf-healthSQL_tooltip2").qtip({
    content: {
      text: function () {
        return $(this).next("div").clone();
      },
      title: {
        text: "How much history is considered for a rating?",
        button: true
      }
    },
    position: {
      my: 'bottom center',  // Position tooltip's top left...
      at: 'bottom center', // at the bottom center of invoker link
      adjust: { x: 0, y: -17 }
    },
    show: {
      event: 'click', // Show it on click...
      solo: true, // ...and hide all other tooltips
      effect: function () { $(this).fadeIn() }
    },
    hide: {
      event: 'unfocus',
      effect: function () { $(this).fadeOut() }
    },
    style: {
      classes: "qtip-jtools lucy",
      tip: {
        corner: "bottom center",
        mimic: "bottom center",
        offset: 0,
        width: 25,
        height: 20
      }
    }
  });

  $(".perf-healthSQL_tooltip3").qtip({
    content: {
      text: function () {
        return $(this).next("div").clone();
      },
      title: {
        text: "About Samples",
        button: true
      }
    },
    position: {
      my: 'bottom center',  // Position tooltip's top left...
      at: 'bottom center', // at the bottom center of invoker link
      adjust: { x: 0, y: -17 }
    },
    show: {
      event: 'click', // Show it on click...
      solo: true, // ...and hide all other tooltips
      effect: function () { $(this).fadeIn() }
    },
    hide: {
      event: 'unfocus',
      effect: function () { $(this).fadeOut() }
    },
    style: {
      classes: "qtip-jtools lucy",
      tip: {
        corner: "bottom center",
        mimic: "bottom center",
        offset: 0,
        width: 25,
        height: 20
      }
    }
  });

  $(".perf-healthSQL_tooltip4").qtip({
    content: {
      text: function () {
        return $(this).next("div").clone();
      },
      title: {
        text: "About the Moving Average",
        button: true
      }
    },
    position: {
      my: 'bottom center',  // Position tooltip's top left...
      at: 'bottom center', // at the bottom center of invoker link
      adjust: { x: 0, y: -17 }
    },
    show: {
      event: 'click', // Show it on click...
      solo: true, // ...and hide all other tooltips
      effect: function () { $(this).fadeIn() }
    },
    hide: {
      event: 'unfocus',
      effect: function () { $(this).fadeOut() }
    },
    style: {
      classes: "qtip-jtools lucy",
      tip: {
        corner: "bottom center",
        mimic: "bottom center",
        offset: 0,
        width: 25,
        height: 20
      }
    }
  });

  $(".least-healthly_tooltip").qtip({
    content: {
      text: function () {
        return $(this).next("div").clone();
      },
      title: {
        text: "What indicates good or bad performance health?",
        button: true
      }
    },
    position: {
      my: 'bottom center',  // Position tooltip's top left...
      at: 'bottom center', // at the bottom center of invoker link
      adjust: { x: 20, y: -80 }
    },
    show: {
      event: 'click', // Show it on click...
      solo: true, // ...and hide all other tooltips
      effect: function () { $(this).fadeIn() }
    },
    hide: {
      event: 'unfocus',
      effect: function () { $(this).fadeOut() }
    },
    style: {
      classes: "qtip-jtools lucy",
      tip: {
        corner: "bottom center",
        mimic: "bottom center",
        offset: 0,
        width: 25,
        height: 20
      }
    }
  });

});

function setChartsTheme()
{
  Highcharts.setOptions({
    chart: {
      style: {
        fontFamily: '"Segoe UI","Helvetica Neue",Arial,sans-serif'
      },
      backgroundColor: '#262626'
    },
    title: {
      style: {
         color: '#C4E3FD',
         font: '13px "Segoe UI Semibold","Myriad Pro Semibold",Arial,sans-serif'
      }
    },
    xAxis: {
      gridLineColor: "#444444",
      title : {
        style: {
          color: '#dddddd',
          fontWeight: 'normal'
        }
      },
      labels: {style: { color:'#999999'} }
    },
    yAxis: {
      gridLineColor: "#444444",
      title : {
        style: {
          color: '#dddddd',
          fontWeight: 'normal'
        }
      },
      labels: {style: { color:'#999999'} }
    },
    legend: {
      enabled: false
    },
    credits: {
      enabled: false
    }
  });
}

function drawRecentHealthChart(data)
{
  for (var i = 0; i < data.recentHealth.length; i++)
  {
    if (data.recentHealth[i].isHealthy)
    {
      data.recentHealth[i].marker = { 
        fillColor: '#339900',
        states: { hover: {
          fillColor: '#339900'
        }}
      };
    }
  }

  $("#recent-health-chart").css("background-image", "none");
  var skullMarker = null;
  var chart = new Highcharts.Chart({
    chart: {
      renderTo: 'recent-health-chart'
    },
    title: {
      text: 'Performance Health Rating over the last month'
    },
    xAxis: {
      type: 'datetime'
    },
    yAxis: {
      title: {
        text: 'Database Health rating',
        style: { color: '#cccccc' }
      },
      min: 0,
      endOnTick: false // to prevent silly 125% label
    },
    plotOptions: {
      line: {
        color: '#4572A7',
        marker: {
          enabled: false
        },
        states: {
          hover: {
            lineWidth: 0
          }
        },
        enableMouseTracking: false
      },
      scatter: {
        marker: {
          fillColor: '#982323',
          symbol: 'circle',
          radius: 2,
          states: {
            hover: {
              radius: 8
            }
          }
        },
        cursor: 'pointer',
        point: {
          events: {
            click: function() {
              skullMarker.attr("x", chart.plotLeft + this.plotX - 9);
              skullMarker.attr("y", chart.plotTop + this.plotY + 5);
              updatePointDetails(this.x);
            }
          }
        }
      }
    },
    tooltip: {
      formatter: function() {
        return '<span style="font-size:10px">' + Highcharts.dateFormat('%e %b %Y %H:%M', this.x) + '</span><br/>' +
          'Health rating: <b>' + this.y + '</b>%<br />' +
          '<span style="font-size:10px">Click to view performance health</span><br /><span style="font-size:10px">details at that point in time<br /></span>';
      }
    },
    legend: {
      enabled: true,
      borderRadius: 3,
      borderWidth: 0,
      borderColor: '#000000',
      backgroundColor: '#333333',
      shadow: true,
      symbolPadding: 10,
      itemStyle: {
        font: '12px "Segoe UI Semibold", "Myriad Pro Semibold", Arial, sans-serif;',
        color: '#cccccc'
      },
      itemHoverStyle: { color: '#ffffff' }
    },
    series: [{
      name: "Samples",
      type: 'scatter',
      color: '#cccccc',
      data: data.recentHealth
    }, {
      name: "Moving average",
      type: 'line',
      data: data.healthMovingAverage
    }]
  },
  function (chart) { // on complete
    skullMarker = chart.renderer.image('./assets/perf-health_skull-x-bones_SML.gif',
      chart.plotLeft + chart.xAxis[0].translate(data.worstHealthPoint.x) - 9,
      chart.plotTop + chart.plotHeight - chart.yAxis[0].translate(data.worstHealthPoint.y) + 5,
      18, 23)
      .add()
      .toFront();
  });
}

function drawWorldComparisonChart(data)
{
  for (var i = 0; i < data.length; i++)
  {
    if (data[i].isHealthy)
    {
      data[i].color = {
        linearGradient: [0, 0, 0, 300],
        stops: [
          [0, 'rgb(47,119,11)'],
          [1, 'rgb(0,0,0)']
        ]};
      data[i].borderColor = '#1e5d04';
    }
  }
  var you = $("#perf-health_score").text() / 10;
  if (you <= 0.45) // adjust lollipop position
    you = 0;
  else if (you >= 10)
    you = 10;
  else
    you -= 0.45;

  $("#world-comparison-chart").css("background-image", "none");
  var chart = new Highcharts.Chart({
    chart: {
      renderTo: 'world-comparison-chart'
    },
    title: {
      text: 'Percentage of Instances with the same Performance Health Rating'
    },
    xAxis: {
      min: 0,
      categories: ['0%', '10%', '20%', '30%', '40%', '50%', '60%', '70%', '80%', '90%', '100%'],
      title: { text: 'Performance Health Rating' }
    },
    yAxis: {
      min: 0,
      title: { text: '% of Instances'}
    },
    plotOptions: {
      column: {
        color: {
           linearGradient: [0, 0, 0, 300],
           stops: [
              [0, 'rgb(117,35,35)'],
              [1, 'rgb(0,0,0)']
           ]
        },
        borderColor: '#810000'
      }
    },
    series: [{
      type: 'column',
      data: data
    }, {
      type: 'scatter',
      name: 'You',
      data: $("#perf-health_score").text() != "" ? [{
        x: you,
        y: 0,
        value: $("#perf-health_score").text()
      }] : [],
      marker: { symbol: 'url(./assets/you-pin-dark.png)' }
    }],
    tooltip: {
      formatter: function() {
        if (this.series.name == 'You')
          return 'Your health rating is <b>' + this.point.value + '%</b>';
        return '<b>' + (this.y < 1 ? '&lt;1' : Math.round(this.y)) + 
          '%</b> of Lucy population has health<br />rating ' + 
          (this.point.x < 10 ? 
          'between ' + this.point.x * 10 + ' and ' + (this.point.x * 10 + 10) : '100');
      }
    }
  });
}

function drawWaitCategoriesChart(data)
{
  prepareWaitCategoriesData(data);

  $("#wait-categories-chart").css("background-image", "none");
  var chart = new Highcharts.Chart({
    chart: {
      defaultSeriesType: 'column',
      renderTo: 'wait-categories-chart'
    },
    title: {
      text: 'Instance Wait Time'
    },
    xAxis: {
      categories: data.categories
    },
    yAxis: {
      min: 0,
      title: { text: '% of Time Spent Waiting'}
    },
    plotOptions: {
      column: {
        color: {
           linearGradient: [0, 0, 0, 300],
           stops: [
              [0, 'rgb(117,35,35)'],
              [1, 'rgb(0,0,0)']
           ]
				},
        borderColor: '#810000'
      }
    },
    series: [{
      data: data.values
    }],
    tooltip: {
      formatter: function() {
        return this.x + ': <b>' + (this.y < 1 ? '&lt;1' : this.y) + '%</b>';
      }
    }
  });
  $("#wait-categories-chart").data("chart", chart);
}

function prepareWaitCategoriesData(data)
{
  for (var i = 0; i < data.values.length; i++)
  {
    data.values[i].x = i; // To stop reusing categories, see https://github.com/highslide-software/highcharts.com/issues/1879
    if (data.values[i].isGood)
    {
      data.values[i].color = {
        linearGradient: [0, 0, 0, 300],
        stops: [
          [0, 'rgb(47,119,11)'],
          [1, 'rgb(0,0,0)']
        ]};
      data.values[i].borderColor = '#1e5d04';
    }
  }
  console.log(data);
}

function updateWaitCategoriesChart(data)
{
  prepareWaitCategoriesData(data);
  var chart = $("#wait-categories-chart").data("chart");
  var series = chart.series[0];
  var i;
  for (i = 0; i < data.values.length; i++)
  {
    if (i < series.data.length)
      series.data[i].update(data.values[i], false);
    else
      series.addPoint(data.values[i], false);
  }
  while (series.data.length > data.values.length)
  {
    series.data[series.data.length - 1].remove(false);
  }
  chart.xAxis[0].setCategories(data.categories, false);
  chart.hideLoading();
  chart.redraw(true);
}

function drawIoLatencyChart(singleBlockReadLatency)
{
  $("#io-latency-chart").css("background-image", "none");
  var chart = new Highcharts.Chart({
    chart: {
      defaultSeriesType: 'scatter',
      renderTo: 'io-latency-chart',
      plotBackgroundImage: './assets/io-latency-bar-bg.png',
      height: 162,
      width: 557
    },
    title: {
      text: 'I/O Latency'
    },
    xAxis: {
      min: -1.2,
      max: 34,
      tickInterval: 10,
      showLastLabel: true,
      lineWidth: 0,
      tickLength: 0,
      tickWidth: 0,
      labels: {
        x: 4,
        y: 22,
        formatter: function() {
          return this.value +' ms';
        },
        style: {
          color: '#ddd',
          fontSize: '13px'
        }
      }
    },
    yAxis: {
      min: 0,
      max: 10,
      title: {
        text: null
      },
      labels: {
        enabled: false
      },
      gridLineWidth: 0
    },
    plotOptions: {
    },
    series: [{
      data: prepareIoLatencyData(singleBlockReadLatency),
      marker: { symbol: 'url(./assets/you-pin-dark.png)' }
    }],
    tooltip: {
      formatter: function() {
        return this.point.value + " ms/read";
      }
    }
  });
  $("#io-latency-chart").data("chart", chart);
}

function drawIoLatencyHistoryChart(ioLatencyHistory)
{
  var max = getMaximum(ioLatencyHistory);
  var chart = new Highcharts.Chart({
    chart: {
      renderTo: 'io-latency-history-chart',
      type: 'area'
    },
    title: {
      text: 'I/O Latency Versus Time'
    },
    xAxis: {
      type: 'datetime',
      dateTimeLabelFormats: {
        minute: '%e %b %H:%M',
        hour: '%e %b %H:%M',
        day: '%e %b',
        week: '%e %b'
      }
    },
    yAxis: {
      min: 0,
      max: max,
      labels: {
        style: {
        }
      },
      title: {
        text: 'milliseconds per I/O'
      },
      showFirstLabel: false      
    },
    legend: {
      enabled: false
    },
    tooltip: {
      formatter: function() {
        return '<span style="font-size:10px">' + Highcharts.dateFormat('%e %b %Y %H:%M', this.x) + '</span><br/>' +
          '<b>' + this.y + '</b> ms';
      }
    },
    plotOptions: {
      series: {
        color: '#4572A7',
        lineWidth: 0,
        marker: {
          enabled: false,
          states: {
            hover: {
              enabled: true
            }
          }
        },
        fillColor: {
          linearGradient: ['0', 
             (100 - 16.21 - 0.0034*max + 14683.866/max/max) + '%', // formula was created empirically
            '0%', '0%'],
          stops:
            [
              [0.47 * 30 / max, '#2d6b0a'],
              [0.62 * 30 / max, '#e2a806'],
              [0.76 * 30 / max, '#790202']
            ]          
        },
        shadow: false,
        threshold: null
      }
    },
    series: [ {data: ioLatencyHistory }]
  });
}

function getMaximum(ioLatencyHistory)
{
  var max = 0;
  for (var i = 0; i < ioLatencyHistory.length; i++)
  {
    if (ioLatencyHistory[i][1] > max)
      max = ioLatencyHistory[i][1];
  }
  max = Math.ceil(max * 10) / 10;
  if (max <= 30)
    max = 30;
  return max;
}

function prepareIoLatencyData(singleBlockReadLatency)
{
  return [{
    x: singleBlockReadLatency <= 30 ? singleBlockReadLatency : 31.2,
	  y: 0.2,
    value: singleBlockReadLatency
  }];
}

function updateIoLatencyChart(singleBlockReadLatency)
{
  var data = prepareIoLatencyData(singleBlockReadLatency);
  var chart = $("#io-latency-chart").data("chart");
  chart.series[0].data[0].update(data[0], false);
  chart.hideLoading();
  chart.redraw(true);
}

function setWorstHealthTime(dt)
{
  $("#worst-health-time").text(Highcharts.dateFormat("(ON %e %b %Y %H:%M)", dt));  
}

function showProblems(problems)
{
  $("#excessive-waits").toggle(problems.categoriesThatCanRelinquishWaitTime != "");
  $("#wait-problems").text(problems.categoriesThatCanRelinquishWaitTime);
  $("#more-wait-problems").toggle(problems.moreAvailable);
  $("#high-single-block-read-time").toggle(problems.highSingleBlockReadTime);
  $("#in-addition-to").toggle(problems.categoriesThatCanRelinquishWaitTime != "" && 
    problems.highSingleBlockReadTime);
  $("#progress-indicator-problems").hide();
  $("#problems").toggle(problems.categoriesThatCanRelinquishWaitTime != "" || 
    problems.highSingleBlockReadTime);
}

function updatePointDetails(observationTime)
{
  setWorstHealthTime(observationTime);
  var chart = $("#wait-categories-chart").data("chart");
  if (chart != null)
    chart.showLoading("Loading... <img src='/images/progress-indicator.gif' />");
  $("#progress-indicator-problems").show();
  $("#problems").hide();

  params = { observationTimeJs: observationTime };
  url = getPointDetailsUrl(params);
  $.getJSON(url, params, function(data) {
    updateWaitCategoriesChart(data.worstWaitCategories);
    updateIoLatencyChart(data.singleBlockReadLatency);
    showProblems(data.problems);
    $("#single-block-read-latency").text(data.singleBlockReadLatency);
  })
  .error(function(jqXHR, textStatus) {
    if (jqXHR.status)
      $("#wait-categories-chart").css("background", "#fff").html('<h1>Ruh Roh</h1><img src="/images/ruh-roh_face-sick.gif" />');
  });
}
